# 流水并行-模型库

timm==0.6.12



## ResNet50

25M参数量

```python
with pipelinable:
  from torchvision.models import resnet50
  model = resnet50()
exec_seq = [
    'conv1', 'bn1', 'relu', 'maxpool', 'layer1', 'layer2', 'layer3', 'layer4', 'avgpool',
    (lambda x: torch.flatten(x, 1), "behind"), #丢失的操作
  	'fc',
]
pipelinable.to_layer_list(exec_seq)
```



## swinv2_cr_small_ns_224

50M参数量

```python
with pipelinable:
  	import timm
    model = timm.create_model("swinv2_cr_small_ns_224", pretrained=False)
exec_seq = [
    "patch_embed",
    "stages",
    (lambda x: x.mean(dim=(2, 3)), "mean"), #丢失的操作
    "head",
]
pipelinable.to_layer_list(exec_seq)
```



## convnext_xlarge_in22ft1k

350M参数量

```python
with pipelinable:
    import timm
    model = timm.create_model(
        "convnext_xlarge_in22ft1k",
        pretrained=False,
    )
exec_seq = ["stem", "stages", "head"]
pipelinable.to_layer_list(exec_seq) 
```

